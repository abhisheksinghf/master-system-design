---
title: Consistency Models
sidebar_label: "1.5 Consistency Models"
description: Understanding strong, eventual, and session consistency models.
---

# Consistency Models

> Goal: Understand how and when data becomes consistent in distributed systems, and how different consistency models affect correctness, latency, and availability.

---

## 1.5.1 What Is Consistency?

**Consistency** defines the **rules for what data a client is allowed to see** after writes occur in a distributed system.

It answers questions like:
- Will I see my own update immediately?
- Will all users see the same value?
- Can different users see different values at the same time?

---

## 1.5.2 Why Consistency Models Matter

In distributed systems:
- Data is replicated
- Network delays exist
- Failures happen

ğŸ‘‰ Because of this, **perfect consistency is expensive**.

Consistency models let us **choose the right trade-off** between:
- Correctness
- Latency
- Availability

---

## 1.5.3 Strong Consistency â­â­â­â­â­

### Definition
After a write completes, **all subsequent reads return the latest value**.

```mermaid
sequenceDiagram
    Client->>Node1: Write X = 10
    Client->>Node2: Read X
    Node2-->>Client: X = 10
````

### Characteristics

* Always correct data
* High coordination cost
* Higher latency
* Lower availability during failures

### Use Cases

* Banking systems
* Payment ledgers
* Inventory management

### Interview Line â­

> Strong consistency prioritizes correctness over latency.

---

## 1.5.4 Eventual Consistency â­â­â­â­â­

### Definition

If no new updates occur, **all replicas will eventually converge** to the same value.

```mermaid
sequenceDiagram
    Client->>Node1: Write X = 10
    Client->>Node2: Read X
    Node2-->>Client: X = 9
    Note over Node2: Eventually updates to 10
```

### Characteristics

* High availability
* Lower latency
* Temporary inconsistencies allowed

### Use Cases

* Social media feeds
* Likes/comments count
* Caches

### Interview Line â­

> Eventual consistency trades correctness for availability and speed.

---

## 1.5.5 Read-After-Write Consistency â­â­â­â­

### Definition

A client always sees **its own writes**, but others may not see them immediately.

```mermaid
sequenceDiagram
    Client->>Node1: Write X = 10
    Client->>Node2: Read X
    Node2-->>Client: X = 10
    OtherClient->>Node2: Read X
    Node2-->>OtherClient: X = 9
```

### Characteristics

* Better user experience
* Moderate consistency
* Common in user-facing apps

### Use Cases

* User profile updates
* Settings changes

---

## 1.5.6 Monotonic Read Consistency â­â­â­

### Definition

Once a client has seen a value, it will **never see an older value** later.

```mermaid
sequenceDiagram
    Client->>Node1: Read X = 9
    Client->>Node2: Read X
    Node2-->>Client: X = 10
```

âŒ Never allowed:

```
9 â†’ 10 â†’ 8
```

### Use Cases

* News feeds
* Timeline scrolling

---

## 1.5.7 Monotonic Write Consistency â­â­â­

### Definition

Writes from a single client are **applied in order**.

```mermaid
sequenceDiagram
    Client->>Node1: Write X = 5
    Client->>Node1: Write X = 6
```

Guarantee:

```
X = 6 (never X = 5 after)
```

### Use Cases

* Financial transactions
* User updates

---

## 1.5.8 Causal Consistency â­â­â­â­

### Definition

Operations that are **causally related** must be seen in the same order by all nodes.

Example:

* Comment must appear **after** the post

```mermaid
sequenceDiagram
    UserA->>Node1: Post created
    UserB->>Node2: Comment added
```

Guarantee:

* No one sees comment before post

### Use Cases

* Social networks
* Collaboration tools

---

## 1.5.9 Consistency Spectrum (Important View)

```mermaid
graph LR
    EC[Eventual] --> RC[Read-after-write]
    RC --> MC[Monotonic]
    MC --> CC[Causal]
    CC --> SC[Strong]
```

ğŸ‘‰ As consistency increases:

* Latency increases
* Availability decreases

---

## 1.5.10 Choosing the Right Consistency Model

| System         | Consistency Model |
| -------------- | ----------------- |
| Payment ledger | Strong            |
| Bank balance   | Strong            |
| Social feed    | Eventual          |
| User profile   | Read-after-write  |
| Cache          | Eventual          |

### Interview Rule â­

> Choose the weakest consistency model that satisfies business requirements.

---

## 1.5.11 Consistency vs CAP (Connection)

* CP systems â†’ Strong consistency
* AP systems â†’ Eventual consistency
* Hybrid systems â†’ Mixed models

> Consistency models are **how CAP decisions are implemented**.

---

## 1.5.12 Common Interview Mistakes âŒ

âŒ Thinking eventual consistency means â€œwrong data foreverâ€
âŒ Using strong consistency everywhere
âŒ Ignoring user experience

âœ… Reality:

* Eventual consistency is safe for many systems
* Strong consistency is expensive
* Hybrid models are common

---

## Key Takeaways â­â­â­â­â­

* Consistency defines what data users see
* Strong consistency = correctness + latency
* Eventual consistency = availability + speed
* Many useful middle-ground models exist
* Choose based on business needs

---

## Interview-Ready One-Liners â­

* â€œConsistency defines data visibility guarantees.â€
* â€œStrong consistency is expensive.â€
* â€œEventual consistency is acceptable for many user-facing systems.â€
* â€œHybrid consistency models are common in real systems.â€

---

## References & Deep-Dive Resources

### Articles

* [https://www.geeksforgeeks.org/consistency-models-in-distributed-systems/](https://www.geeksforgeeks.org/consistency-models-in-distributed-systems/)
* [https://martinfowler.com/articles/patterns-of-distributed-systems/](https://martinfowler.com/articles/patterns-of-distributed-systems/)
* [https://jepsen.io/consistency](https://jepsen.io/consistency)

### Videos

* [https://www.youtube.com/watch?v=gluIh8zd26I](https://www.youtube.com/watch?v=gluIh8zd26I) (Consistency Models Explained)
* [https://www.youtube.com/watch?v=ZKXK3x8E3eI](https://www.youtube.com/watch?v=ZKXK3x8E3eI) (Strong vs Eventual Consistency)

### Books

* *Designing Data-Intensive Applications* â€“ Martin Kleppmann
* *Distributed Systems* â€“ Tanenbaum

---