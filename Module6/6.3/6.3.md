---
title: Circuit Breaker Pattern
sidebar_label: "6.3 Circuit Breaker Pattern"
description: Understanding why circuit breakers are needed and how they prevent cascading failures in distributed systems
---

# Circuit Breaker Pattern

> Goal: Understand how circuit breakers prevent cascading failures and improve system resilience in distributed systems.

---

## 6.3.1 Why Circuit Breakers Are Needed ⭐⭐⭐⭐⭐

In distributed systems:

- Service A calls Service B
- Service B becomes slow or unavailable
- Service A keeps waiting
- Threads pile up
- Entire system becomes slow

This causes **cascading failure**.

> One slow service can bring down the entire system.

---

## 6.3.2 What Is the Circuit Breaker Pattern?

A Circuit Breaker:

- Monitors failures
- Stops calling a failing service
- Fails fast instead of waiting

Inspired by electrical circuit breakers.

---

## 6.3.3 Circuit Breaker States ⭐⭐⭐⭐⭐

There are three main states:

---

### 1️⃣ Closed (Normal State)

- Requests flow normally
- Failures counted
- If failure threshold exceeded → Open

```mermaid
graph LR
    Client --> ServiceB
````

---

### 2️⃣ Open (Failure State)

* No requests sent to failing service
* Immediate failure returned
* System avoids wasting resources

```mermaid
graph LR
    Client -.-X ServiceB
```

---

### 3️⃣ Half-Open (Testing State)

* After timeout, allow limited requests
* If successful → move to Closed
* If fails → move back to Open

```mermaid
graph LR
    Client -->|Test Request| ServiceB
```

---

## 6.3.4 How It Works (Step-by-Step)

1. Monitor error rate or timeouts.
2. If threshold exceeded → Open circuit.
3. Reject further calls immediately.
4. After cooldown period → move to Half-Open.
5. If healthy → resume traffic.

---

## 6.3.5 Why Fail Fast Is Important ⭐⭐⭐⭐⭐

Fail fast:

* Prevents thread exhaustion
* Reduces latency impact
* Protects upstream services
* Improves user experience

Better to return error quickly than hang for 30 seconds.

---

## 6.3.6 Example: Payment System

Scenario:

* Fraud service becomes slow.
* Payment service calls fraud service synchronously.
* Without circuit breaker → payments blocked.
* With circuit breaker → skip fraud temporarily and degrade gracefully.

> Critical path must not depend indefinitely on slow services.

---

## 6.3.7 Circuit Breaker vs Retry

Retry:

* Tries again after failure.

Circuit Breaker:

* Stops trying after repeated failures.

Use both carefully:

* Retry small transient failures.
* Circuit breaker for persistent failures.

---

## 6.3.8 Benefits ⭐⭐⭐⭐⭐

* Prevents cascading failures
* Improves resilience
* Reduces system overload
* Enables graceful degradation

---

## 6.3.9 Challenges

* Choosing correct failure threshold
* Selecting cooldown duration
* Avoiding premature opening
* Handling partial recovery

---

## 6.3.10 Common Interview Mistakes ❌

❌ Confusing circuit breaker with retry
❌ Not explaining the three states
❌ Ignoring failure thresholds
❌ Not mentioning fail-fast behavior

✅ Correct thinking:

* Detect repeated failures
* Open circuit
* Test recovery
* Resume traffic safely

---

## Key Takeaways ⭐⭐⭐⭐⭐

* Circuit breakers prevent cascading failures
* Three states: Closed, Open, Half-Open
* Fail fast is critical
* Protects system from overload
* Often combined with retry and timeout

---

## Interview-Ready One-Liners ⭐

* “Circuit breakers prevent cascading failures.”
* “Fail fast to protect upstream services.”
* “Three states: Closed, Open, Half-Open.”
* “Better to fail quickly than hang.”